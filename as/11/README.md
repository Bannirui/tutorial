函数及x86调用
---

x86提供了指令call用于发起函数调用，call指令接一个操作数，即被调用函数的第一条指令地址

函数执行完成后，需要返回调用者，x86提供了ret指令，函数运行完成后，可以使用该指令返回调用者

在发起函数调用的那一刻，虽然表面上执行的是call指令，但是本质上还是通过修改指令指针跳转到目标函数的第一条指令处。而此时，处理器执行call指令的这一刻，指令指针中记录的是call指令之后的下一行代码地址，而这个地址恰恰是被调用函数运行完毕后返回的地址。所以，在call指令修改指令指针之前，必须将其记录下来，否则从被调用函数返回时就迷路了。那么这个地址记录在哪儿呢，处理器在执行指令call时，在修改指令指针之前，首先将指令指针中的地址压入栈中，然后将指令指针中的地址更新为被调用函数第一条指令地址，实现函数跳转。

当被调用函数执行ret指令时，ret指令从栈顶弹出返回地址到指令指针寄存器，从而将程序控制流程转移到被调用函数返回地址